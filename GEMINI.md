# feed2cli プロジェクト概要

この `feed2cli` プロジェクトは、RSS/Atomフィードを処理し、その内容を様々な形式で出力するためのCLIツールです。Plaggerにインスパイアされており、フィルタによる柔軟なフィード加工を目指しています。

## 主要な機能と構成

*   **`feed2cli.go`**:
    *   プロジェクトのメインエントリーポイント。
    *   コマンドライン引数の解析、フィードの入力、フィルタ適用、差分検出、マージ、出力処理のオーケストレーションを行います。

*   **`types.go`**:
    *   フィルタリングによって付与された追加情報を格納するための `FilteredItem` 構造体などを定義しています。
    *   これにより、フィルタ処理と出力処理の間で、構造化されたデータを安全に受け渡すことができます。

*   **入力処理**:
    *   **`input_uri.go`**: URIからフィードを読み込む機能を提供します。
    *   **`input_standerd.go`**: 標準入力からフィードを読み込む機能を提供します。

*   **フィルタ処理**:
    *   **`filter.go`**:
        *   フィードの各エントリに対して汎用的な処理を適用するためのフィルタ機能を提供します。
        *   `Filter` インターフェースを定義し、拡張性を確保しています。
        *   **`HatenaBookmarkFilter`**: はてなブックマークのブックマーク数とコメントを取得し、`FilteredItem` 構造体に格納します。

*   **フィード構造とソート**:
    *   **`sortableFeed.go`**: フィードエントリをソート可能にするための構造体とメソッドを定義しています。主に `time.Time` に基づいてソートされます。

*   **差分検出とマージ**:
    *   **`diff.go`**: 2つのフィードの差分を検出します。
    *   **`merge.go`**: 複数のフィードをマージします。

*   **出力処理**:
    *   **`output_standerd.go`**: RSS形式で標準出力します。フィルタ情報があればDescriptionに追記します。
    *   **`output_slack.go`**: 汎用的なSlack通知機能を提供します。フィルタ情報があればメッセージに含めます。
    *   **`output_slack_hatena_thread.go`**: はてなブックマークのコメントをSlackのスレッドに差分投稿する、特化機能です。
    *   **`output_json.go`**: デバッグ用に、内部データ構造(`FilteredItem`)をJSON形式で標準出力します。

*   **ユーティリティ**:
    *   **`utils.go`**: 各種ヘルパー関数や共通のユーティリティ機能が含まれています。

## 全体的なワークフロー

フィードの取得、フィルタによる加工（はてなブックマーク情報の付与など）、マージや差分といった集約処理、そして多様な形式での出力という一連のワークフローをCLIで実現しています。フィルタと出力は分離されており、柔軟な組み合わせが可能です。